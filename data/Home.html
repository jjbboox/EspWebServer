<!doctype html>
<html lang="zh" class="no-js">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="css/reset.css"> <!-- CSS reset -->
	<link rel="stylesheet" href="css/style.css"> <!-- Resource style -->
	<link rel="stylesheet" href="style.css"> <!-- Resource style -->
	<script src="js/jquery.js"></script>
	<script defer="defer">
		const LedButton = "btnLed";
		const LedBtnSelect = "#" + LedButton;
		// 初始化按钮状态
		$.getJSON("Init", function(jsonObj){
			setLEDButton($(LedBtnSelect), jsonObj.ledstate);
			// const key = "ledstate";

			// if(jsonObj.hasOwnProperty(key)){
			// 	setLEDButton($(LedBtnSelect), jsonObj[key]);
			// }
		});
		$(document).ready(function(){
			$(LedBtnSelect).click(function(){
				$.get("Switch", function(result){
					setLEDButton($(LedBtnSelect), result);
				});
			});
		});
		function setLEDButton($btnLed, stateValue) {
			let className = ((stateValue == "on")?"ledon":"ledoff");
			let buttonName = stateValue=="on"?"关闭板载LED灯":"打开板载LED灯";
			$btnLed.removeClass();
			$btnLed.addClass(className);
			$btnLed.val(buttonName);
		}
	</script>
	<title>Esp8266 Home Center | jjbboox</title>
</head>

<body>

	<main>
		<form class='box'>
			<h1>远程控制开关</h1>
			<input type="button" id="btnLed" class="ledoff" value="打开板载LED灯">
		</form>
		<!-- all your content here -->
	</main>

</body>

</html>