<!doctype html>
<html lang="zh" class="no-js">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="css/reset.css"> <!-- CSS reset -->
	<link rel="stylesheet" href="css/style.css"> <!-- Resource style -->
	<link rel="stylesheet" href="style.css"> <!-- Resource style -->

	<title>Esp8266 Home Center | jjbboox</title>
	<script src="init.js"></script>
	<script defer="defer">
		function doTranslate(ele, language, target) {
			if (ele.value == undefined || ele.value.trim() == "") {
				target.innerHTML = "";
				return;
			}
			var xmlhttp;
			if (window.XMLHttpRequest) {
				xmlhttp = new XMLHttpRequest();
			} else {
				xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			}
			xmlhttp.onreadystatechange = function () {
				if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
					target.innerHTML = xmlhttp.responseText;
					showReturnMsg("Success", "翻译成功");
				}
				else if (xmlhttp.readyState == 4 && ele.value != "") showReturnMsg("Error", "翻译失败");
			};
			showReturnMsg("Info", "正在努力翻译中...");
			xmlhttp.open("POST", "Translate", true);
			xmlhttp.send("lang=" + language.options[language.selectedIndex].value + "&text=" + ele.value);
		};
		function showReturnMsg(type, msg) {
			obj = document.getElementById("responseState");
			obj.innerHTML = msg;
			obj.className = type;
		};
		function copyToClipboard(ele) {
			var val = ele.innerHTML;
			if (val == "" || val == undefined) {
				return;
			}
			var inputEle = document.createElement('input');
			document.body.appendChild(inputEle);
			inputEle.value = val;
			inputEle.readonly = "readonly";
			inputEle.select();
			document.execCommand('copy');
			document.body.removeChild(inputEle);
			showReturnMsg("Info", "译文已复制到剪贴板");
		};
	</script>
</head>

<body>

	<main>
		<h1 class="title">ESP8266 多国语言翻译系统</h1>
		<center>
			<div style="text-align:left;width:80%">
				<p>请输入需要翻译的文本:</p>
				<p>
					<textarea class=inputCtrl id=srcText onchange="doTranslate(this, document.getElementById('language'), document.getElementById('targetText'))"></textarea>
				</p>
				<p>目标语言: </p>
				<p>
					<select class=inputCtrl id=language onchange="doTranslate(document.getElementById('srcText'), this, document.getElementById('targetText'))">
						<option value="zh">中文</option>
						<option value="en">English - 英语</option>
						<option value="yue">粤语</option>
						<option value="wyw">文言文</option>
						<option value="jp">日本語</option>
						<option value="kor">한국어 - 韩语</option>
						<option value="fra">Le français - 法语</option>
						<option value="spa">Español - 西班牙语</option>
						<option value="th">ไทย - 泰语</option>
						<option value="ara">العربية - 阿拉伯语</option>
						<option value="ru">русский - 俄语</option>
						<option value="pt">Português - 葡萄牙语</option>
						<option value="de">Deutsch - 德语</option>
						<option value="it">lingua italiana - 意大利语</option>
						<option value="el">Ελληνικά - 希腊语</option>
						<option value="nl">Nederlands - 荷兰语</option>
						<option value="pl">Polski - 波兰语</option>
						<option value="bul">български - 保加利亚语</option>
						<option value="est">Eesti keel - 爱沙尼亚语</option>
						<option value="dan">dansk - 丹麦语</option>
						<option value="fin">suomalainen - 芬兰语</option>
						<option value="cs">Česky - 捷克语</option>
						<option value="rom">românesc - 罗马尼亚语</option>
						<option value="slo">Slovenščina - 斯洛文尼亚语</option>
						<option value="swe">Svenska - 瑞典语></option>
						<option value="hu">magyar - 匈牙利语</option>
						<option value="cht">繁體中文</option>
						<option value="vie">Tiếng việt - 越南语</option>
					</select>
				</p>

				<p><label for="targetText">译文：</p>
				<h3>
					<span class="response" id="targetText"></span>
				</h3>
				<p>
					<button type="button" id=btnclipboard onclick="copyToClipboard(document.getElementById('targetText'))">复制到剪贴板</button>
				</p>
				<p></p>
				<label for="responseState">反馈：</label><span class="rtnOK" id="responseState"></span>
			</div>
			
		</center>
		
		<!-- all your content here -->
	</main>

</body>

</html>